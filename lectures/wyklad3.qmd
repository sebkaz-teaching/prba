---
title: "Od modelu ER do modelu relacyjnego"
---


## ğŸ¯ Cel wykÅ‚adu

Celem dzisiejszego wykÅ‚adu jest pokazanie, jak przejÅ›Ä‡ od koncepcyjnego modelu ERD (Entityâ€“Relationship Diagram), ktÃ³ry opisuje co chcemy przechowywaÄ‡,
do modelu relacyjnego, ktÃ³ry mÃ³wi jak te dane bÄ™dÄ… fizycznie zorganizowane w tabelach.

ğŸ‘‰ Innymi sÅ‚owy â€” dziÅ› â€przekÅ‚adamyâ€ logikÄ™ Å›wiata rzeczywistego na jÄ™zyk tabel, kolumn i kluczy.



## 1. Wprowadzenie

Zacznijmy od prostego pytania do grupy:

â€Czy narysowany diagram ERD to juÅ¼ baza danych?â€

WiÄ™kszoÅ›Ä‡ studentÃ³w odpowie, Å¼e nie â€” i majÄ… racjÄ™.
ERD to tylko opis pojÄ™Ä‡ i powiÄ…zaÅ„ miÄ™dzy nimi, coÅ› w rodzaju mapy koncepcyjnej.
Dopiero model relacyjny pozwala tÄ™ mapÄ™ zaimplementowaÄ‡ w systemie DBMS â€“ czyli stworzyÄ‡ konkretne tabele, relacje i klucze.

### PrzykÅ‚ad porÃ³wnawczy:

ERD to jak plan architektoniczny domu.

Model relacyjny to juÅ¼ projekt budowlany z wymiarami i materiaÅ‚ami.


## Przypomnienie podstawowych pojÄ™Ä‡

Zanim przejdziemy do reguÅ‚, powtÃ³rzmy szybko:

- Encja â€“ obiekt, o ktÃ³rym przechowujemy dane (np. Student, Kurs, Produkt).
- Atrybut â€“ wÅ‚aÅ›ciwoÅ›Ä‡ tego obiektu (np. imiÄ™, nazwisko, cena).
- ZwiÄ…zek (relationship) â€“ powiÄ…zanie miÄ™dzy encjami (np. Student zapisuje siÄ™ na Kurs).
- Krotka (tuple) â€“ pojedynczy wiersz tabeli (np. dane jednego studenta).
- Domena â€“ dopuszczalne wartoÅ›ci dla atrybutu (np. liczby od 1 do 5 dla oceny).

ğŸ‘‰ Wszystkie te pojÄ™cia znajdÄ… swoje odpowiedniki w modelu relacyjnym.

## Proces mapowania (transformacji)

Teraz przechodzimy do sedna: jak zamieniÄ‡ ERD w zestaw tabel.

MoÅ¼na to potraktowaÄ‡ jak przepis: krok po kroku.


### ğŸ”¹ 1. Encje $\to$ Tabele

KaÅ¼da encja z modelu ER staje siÄ™ tabelÄ… w modelu relacyjnym.

KaÅ¼dy atrybut encji staje siÄ™ kolumnÄ….

WyobraÅºmy sobie, Å¼e prostokÄ…ty z diagramu ER zamieniamy w tabele SQL. 

Wszystkie elipsy (atrybuty) stajÄ… siÄ™ kolumnami.

PrzykÅ‚ad:
```sql

Encja: STUDENT (NrIndeksu, ImiÄ™, Nazwisko, RokStudiow)

Relacja: STUDENT(NrIndeksu, ImiÄ™, Nazwisko, RokStudiow)

```

### ğŸ”¹ 2. Atrybuty zÅ‚oÅ¼one

Atrybut zÅ‚oÅ¼ony to taki, ktÃ³ry sam skÅ‚ada siÄ™ z kilku czÄ™Å›ci.

W modelu relacyjnym nie ma takiej konstrukcji, wiÄ™c trzeba go rozbiÄ‡.

PrzykÅ‚ad:
```sql
Adres = (Ulica, KodPocztowy, Miasto)
```

â€ZauwaÅ¼my, Å¼e dziÄ™ki temu moÅ¼emy np. wyszukiwaÄ‡ po samym mieÅ›cie, co nie byÅ‚oby moÅ¼liwe, gdyby caÅ‚y adres byÅ‚ jednym polem tekstowym.â€



### ğŸ”¹ 3. Atrybuty wielowartoÅ›ciowe

Atrybut wielowartoÅ›ciowy to taki, ktÃ³ry moÅ¼e mieÄ‡ wiÄ™cej niÅ¼ jednÄ… wartoÅ›Ä‡ dla jednej encji.

PrzykÅ‚ad:
Student moÅ¼e mieÄ‡ wiele adresÃ³w e-mail.

W modelu relacyjnym nie moÅ¼emy trzymaÄ‡ wielu wartoÅ›ci w jednej kolumnie, wiÄ™c:
â¡ï¸ Tworzymy osobnÄ… tabelÄ™.

```sql
EMAIL(NrIndeksu, Email)
```

- Klucz gÅ‚Ã³wny: (NrIndeksu, Email)
- NrIndeksu to klucz obcy do tabeli STUDENT.


â€To moment, w ktÃ³rym ERD zaczyna siÄ™ rozrastaÄ‡ â€” z jednej encji robiÄ… siÄ™ dwie tabele.

Ale dziÄ™ki temu baza pozostaje spÃ³jna i czytelna.â€

### ğŸ”¹ 4. ZwiÄ…zki 1:1

ZwiÄ…zek â€jeden do jednegoâ€ oznacza, Å¼e kaÅ¼demu rekordowi z jednej tabeli odpowiada najwyÅ¼ej jeden rekord z drugiej.

PrzykÅ‚ad:

- KaÅ¼da osoba ma dokÅ‚adnie jeden paszport.
```sql
OSOBA(PESEL, ImiÄ™, Nazwisko)
PASZPORT(NrPaszportu, DataWaÅ¼noÅ›ci, PESEL)
```

Dodajemy PESEL jako klucz obcy w tabeli PASZPORT.

â€JeÅ›li obie strony sÄ… naprawdÄ™ w relacji 1:1, moÅ¼na teÅ¼ rozwaÅ¼yÄ‡ poÅ‚Ä…czenie tych tabel â€” ale zwykle zostawia siÄ™ je osobno, gdy przechowujÄ… rÃ³Å¼ne grupy informacji

### ğŸ”¹ 5. ZwiÄ…zki 1:N

To najczÄ™stszy przypadek w praktyce.

PrzykÅ‚ad: Jeden wykÅ‚adowca prowadzi wiele kursÃ³w.

```sql
WYKÅADOWCA(IDWykÅ‚adowcy, ImiÄ™, Nazwisko)
KURS(IDKursu, Nazwa, IDWykÅ‚adowcy)
```

IDWykÅ‚adowcy w tabeli KURS jest kluczem obcym.

â€PamiÄ™tajcie: klucz obcy zawsze dodajemy po stronie N, czyli po tej, gdzie moÅ¼e byÄ‡ wiÄ™cej rekordÃ³w.â€

### ğŸ”¹ 6. ZwiÄ…zki N:M

To przypadek â€wiele do wieluâ€ â€” np. student moÅ¼e uczestniczyÄ‡ w wielu kursach, a kaÅ¼dy kurs ma wielu studentÃ³w.

W tym wypadku nie da siÄ™ dodaÄ‡ klucza obcego do jednej z tabel, wiÄ™c tworzymy tabelÄ™ poÅ›redniczÄ…cÄ….

```sql
STUDENT(NrIndeksu, ImiÄ™, Nazwisko)
KURS(IDKursu, Nazwa)
ZAPIS(NrIndeksu, IDKursu, DataZapisu)
```
â€Ta trzecia tabela to tak naprawdÄ™ odwzorowanie zwiÄ…zku.
DziÄ™ki niej moÅ¼emy np. zapisaÄ‡ dodatkowe informacje o relacji â€” np. datÄ™ zapisania siÄ™ na kurs.â€


### 5. Jak projektowaÄ‡ dobre tabele?

Kiedy masz juÅ¼ relacje, czas je zdefiniowaÄ‡ w SQL.

Tu warto podkreÅ›liÄ‡ kilka zasad:

- Czytelne nazwy (jednolite, najlepiej w liczbie pojedynczej).
- Typy danych dopasowane do zawartoÅ›ci.
- Ograniczenia (constraints):
- PRIMARY KEY â€“ jednoznaczna identyfikacja,
- FOREIGN KEY â€“ zapewnia spÃ³jnoÅ›Ä‡,
- NOT NULL, UNIQUE, CHECK â€“ wymuszajÄ… poprawnoÅ›Ä‡ danych.

PrzykÅ‚ad SQL:
```sql
CREATE TABLE STUDENT (
  NrIndeksu CHAR(6) PRIMARY KEY,
  Imie VARCHAR(30) NOT NULL,
  Nazwisko VARCHAR(40) NOT NULL
);
```

â€To dopiero teraz jest konkretna implementacja â€” coÅ›, co moÅ¼na utworzyÄ‡ w PostgreSQL, MySQL czy Oracle.

Ale zanim napiszemy SQL, zawsze powinniÅ›my mieÄ‡ dobrze przemyÅ›lany model relacyjny.â€

### 6. Ä†wiczenie praktyczne

> Zadanie:
> Zaprojektuj schemat relacyjny dla firmy, w ktÃ³rej pracownicy realizujÄ… projekty.
> KaÅ¼dy projekt ma wielu pracownikÃ³w, a kaÅ¼dy pracownik moÅ¼e uczestniczyÄ‡ w wielu projektach.
> Dodatkowo pamiÄ™tamy od kiedy pracownik uczestniczy w projekcie.

## Podsumowanie:

â€DziÅ› nauczyliÅ›my siÄ™ tÅ‚umaczyÄ‡ jÄ™zyk analitykÃ³w (ERD) na jÄ™zyk baz danych (model relacyjny).â€

- Encje â†’ tabele
- Atrybuty â†’ kolumny
- ZwiÄ…zki â†’ klucze obce lub tabele poÅ›rednie
- Atrybuty zÅ‚oÅ¼one â†’ rozbijamy
- Atrybuty wielowartoÅ›ciowe â†’ osobne tabele

ğŸ‘‰ W kolejnym wykÅ‚adzie przejdziemy do normalizacji, czyli porzÄ…dkowania tabel, by unikaÄ‡ bÅ‚Ä™dÃ³w i redundancji.

